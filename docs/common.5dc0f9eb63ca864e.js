"use strict";(self.webpackChunkrickmortyGraphQL=self.webpackChunkrickmortyGraphQL||[]).push([[592],{612:(g,v,e)=>{e.d(v,{M:()=>c});var t=e(4946),l=e(8245),h=e(3623);const i=function(s){return["/character-details",s]};let c=(()=>{class s{constructor(r){this.localstorageServe=r}getIcon(){return this.charac.isFavorite?"heart-solid.svg":"heart.svg"}toggleFavorite(){const r=this.charac.isFavorite;this.getIcon(),this.charac.isFavorite=!r,this.localstorageServe.addOremovefavorite(this.charac)}static#t=this.\u0275fac=function(a){return new(a||s)(t.Y36(l.D))};static#r=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-characters-card"]],inputs:{charac:"charac"},decls:22,vars:11,consts:[[1,"card"],["routerLinkActive","active",1,"card__link",3,"routerLink"],["rel","preload","as","image","width","300","height","300",3,"src","alt"],[1,"card__details"],[1,"card__favorite"],["rel","preload","as","image","width","30","height","30",3,"src","alt","click"],[1,"card__list"],[1,"table__label"]],template:function(a,o){1&a&&(t.TgZ(0,"article",0)(1,"a",1)(2,"figure"),t._UZ(3,"img",2),t.qZA()(),t.TgZ(4,"div",3)(5,"figure",4)(6,"img",5),t.NdJ("click",function(){return o.toggleFavorite()}),t.qZA()(),t.TgZ(7,"h3"),t._uU(8),t.qZA(),t.TgZ(9,"ul",6)(10,"li")(11,"label",7),t._uU(12,"Status:"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"li")(15,"label",7),t._uU(16,"Species:"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"li")(19,"label",7),t._uU(20,"Gender:"),t.qZA(),t._uU(21),t.qZA()()()()),2&a&&(t.xp6(1),t.Q6J("routerLink",t.VKq(9,i,o.charac.id)),t.xp6(2),t.Q6J("src",o.charac.image,t.LSH)("alt",o.charac.name),t.xp6(3),t.MGl("src","/assets/imgs/",o.getIcon(),"",t.LSH),t.Q6J("alt",o.charac.name),t.xp6(2),t.Oqu(o.charac.name),t.xp6(5),t.hij("",o.charac.status," "),t.xp6(4),t.hij("",o.charac.species," "),t.xp6(4),t.hij("",o.charac.gender," "))},dependencies:[h.rH,h.Od],styles:["figure.card__favorite[_ngcontent-%COMP%]{background:transparent}"],changeDetection:0})}return s})()},8087:(g,v,e)=>{e.d(v,{r:()=>i});var t=e(6814),l=e(3623),h=e(4946);let i=(()=>{class c{static#t=this.\u0275fac=function(r){return new(r||c)};static#r=this.\u0275mod=h.oAB({type:c});static#a=this.\u0275inj=h.cJS({imports:[t.ez,l.Bz]})}return c})()},6046:(g,v,e)=>{e.d(v,{D:()=>r});var t=e(3768),l=e(5619),h=e(8180),i=e(9397),c=e(4946),s=e(8245);const d=t.Ps`
{
  episodes{
    results{
      name
      episode
    }
  }
  characters {
    results {
      id
      name
      status
      species
      gender
      image
    }
  }

}
`;let r=(()=>{class a{constructor(n,_){this.apollo=n,this.localStorageservive=_,this.episodeSubject=new l.X([]),this.episode$=this.episodeSubject.asObservable(),this.charactersSubjext=new l.X([]),this.characters$=this.charactersSubjext.asObservable(),this.getDataApi()}getDataApi(){this.apollo.watchQuery({query:d}).valueChanges.pipe((0,h.q)(1),(0,i.b)(({data:n})=>{const{characters:_,episodes:u}=n;this.episodeSubject.next(u.results),this.paserCharacterData(_.results)})).subscribe()}paserCharacterData(n){const _=this.localStorageservive.getFavoriteCharacters(),u=n.map(E=>{const m=!!_.find(p=>p.id===E.id);return{...E,isFavorite:m}});this.charactersSubjext.next(u)}static#t=this.\u0275fac=function(_){return new(_||a)(c.LFG(t._M),c.LFG(s.D))};static#r=this.\u0275prov=c.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()},8245:(g,v,e)=>{e.d(v,{D:()=>c});var t=e(5619),l=e(4946),h=e(2425);const i="myFavorites";let c=(()=>{class s{constructor(r){this.toastServi=r,this.charactersFavSucj=new t.X([]),this.charactersfav$=this.charactersFavSucj.asObservable(),this.initialStorage()}addOremovefavorite(r){const{id:a}=r;this.getFavoriteCharacters().find(_=>_.id===a)?this.removeFromFavorite(a):this.addToFavorite(r)}addToFavorite(r){try{const a=this.getFavoriteCharacters();localStorage.setItem(i,JSON.stringify([...a,r])),this.charactersFavSucj.next([...a,r]),this.toastServi.success(`${r.name} added to favorite`,"Rick and Morty")}catch(a){console.log("Error saving localstorage",a),this.toastServi.error(`Error saving localstorage ${a}`,"Rick and Morty")}}removeFromFavorite(r){try{const o=this.getFavoriteCharacters().filter(n=>n.id!=r);localStorage.setItem(i,JSON.stringify([...o])),this.charactersFavSucj.next([...o]),this.toastServi.warning("Remove from Favorite","Rick and Morty")}catch(a){console.log("Error removing localstorage",a),this.toastServi.error(`Error removing localstorage ${a}`,"Rick and Morty")}}getFavoriteCharacters(){try{const r=localStorage.getItem(i);if(null!==r){const a=JSON.parse(r);return this.charactersFavSucj.next(a),a}return null}catch(r){console.log("Error getting favorite from localstorage",r)}}clearStorage(){try{localStorage.clear()}catch(r){console.log("Error cleaning  localstorage",r)}}initialStorage(){localStorage.getItem(i)||localStorage.setItem(i,JSON.stringify([])),this.getFavoriteCharacters()}static#t=this.\u0275fac=function(a){return new(a||s)(l.LFG(h._W))};static#r=this.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})()}}]);